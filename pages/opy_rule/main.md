---
Copyright: (C) Ryuichi Ueda
---

# the opy book

* [目次に戻る](/?page=opy_book)

* [1. はじめに](/?page=opy_intro)
* [2. レコードとアクション](/?page=opy_action)
* [3. パターンによる検索](/?page=opy_pattern)

## 4. ルールと組み合わせ

### 4.1 ルール

　パターンとアクションを組み合わせると「パターンにマッチしたレコードに対してアクションを実行する」ということができます。例えば次の例は、入力される数字についてパターンで`F1`が奇数の行だけを残し、その行の後ろに「奇数」と付加するというものです。

```
$ seq 3 | opy 'F1%2==1:[F1,"奇数"]'
1 奇数
3 奇数
```

パターン`F1%2==1`の後ろにアクション`[F1,"奇数"]`を並べて書くことで、パターンによるフィルタリングと、マッチした行に対する処理を書くという方法は、AWKと同じです。ただし、パターンとアクションの間には`:`（コロン）を入れます。パターンとアクションを組にしたものは**ルール**と呼ばれます。（文法上はパターン単体、アクション単体もルールとして扱われます。）

### 4.2 ルールの組み合わせ


### 4.3 BEGINパターン・ENDパターン



