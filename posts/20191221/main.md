---
Keywords: 日記
Copyright: (C) 2019 Ryuichi Ueda
---

# このサイトのGDPR対策（2019年12月21日） 


　今日は一日これをやっていました。とりあえずやったことをメモしておきます。「こうしたらいいよ！」という話ではなく、素人が右往左往している記録。


## ワーニングの表示

　これまでも初回訪問時に「クッキーがいやならブラウザで切ってね」とワーニングを出していたのだけど、人のライブラリを使っていて仕組みがよくわからなかったので、自分で実装し直しました。ブラウザでゲストユーザで見ると、フッタの部分に表示されるようになっています。

## クッキーへのOK/NGの記録

　フッタには「Got it」と「NG」というボタンがあり、押すとクッキーに「`cookieconfirm=ok`」か「`cookieconfirm=ng`」が入ります。これを次回以降見て制御をします。`cookieconfirm=ok`なら、3ヶ月間は再びフッタにワーニングが表示されず、普通にサイトが閲覧できます。

## NGの場合の制御

　一方、「NG」を押した場合、今のところ、Google Analyticsだけが止まるようになっています。AdSenseやその他（TwitterやYouTubeのボタンが勝手に設定するcookie）は、まだそのままなので、ワーニングの文章にテスト中である旨が書いてあります。中途半端なんですが、正直どうしていいかよくわからんという状況です。
