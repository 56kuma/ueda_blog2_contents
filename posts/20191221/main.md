---
Keywords: 日記, GDPR, bashcms2, ウェブ
Copyright: (C) 2019 Ryuichi Ueda
---

# このサイトのGDPR対策（2019年12月21日）


　今日は一日、このサイトのGDPR対策をやっていました。基本、このサイトは日本語なので大丈夫だとは思うのですが、一応英語を書かないこともないし、英語書こうと思った時にGDPRのことが頭にあるとやる気がなくなりますので、ちょっと真面目に取り組んでみようという意図です。とりあえずやったことをメモしておきます。「こうしたらいいよ！」という話ではなく、素人が右往左往している記録です。


## ワーニングの表示

　これまでも初回訪問時に「クッキーがいやならブラウザで切ってね」とワーニングを出していましたが、人のライブラリを使っていて仕組みがよくわからなかったので、自分で実装し直しました。ブラウザでゲストユーザで見ると、フッタの部分に表示されるようになっています。フッタの部分はBootstrapの`fixed-bottom`などを使っています。

## クッキーへのOK/NGの記録

　フッタには「Got it」と「NG」というボタンがあり、押すとクッキーに「`cookieconfirm=ok`」か「`cookieconfirm=ng`」が入ります。これを次回以降見て制御をします。`cookieconfirm=ok`なら、3ヶ月間は再びフッタにワーニングが表示されず、普通にサイトが閲覧できます。コードは本日現在、[main.js](https://b.ueda.tech/bsview/main.js)の下の方にあります。

## 制御

　「Got it.」を押さない限り、Google Analyticsが動かないようにしてあります。AdSenseやその他（TwitterやYouTubeのボタンが勝手に設定するcookie）は、まだそのままなので中途半端で、ワーニングの文章にテスト中である旨が書いてあります。


## 他にやったこと

　[Cookiebotのサイト](https://www.cookiebot.com/en/)でGDPR対応をチェックして（当然まだダメ）、調査結果からどんなクッキーがこのサイトで飛び交っているのか勉強をしました。結果（というわけでもないですが、必要だとも思われないので）Facebookとlineのボタンの表示をやめました。


## 今後

　AdSenseのトラッキングを止めたいです。（AdSenseのページでターゲット広告は選んでないような気がするのですが、データがGoogleに送信されているのは事実なので。）AdSenseはやめりゃいいという話だと思いますが、それやっちゃうとこういうことも勉強しなくなるし、稼いじゃいけないみたいな風潮に加担してしまうような気がするので、もうちょっとがんばります。ちなみに私程度だとサーバ代はサイトからの収入ではまかなえません。


## ぼやき

　なるべく業者に頼まずに個人でサイトを持つの、だんだんむずかしくなってますね・・・。自分で家を建てるくらい難しい。


